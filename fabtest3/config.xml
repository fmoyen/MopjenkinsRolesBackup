<?xml version='1.1' encoding='UTF-8'?>
<matrix-project plugin="matrix-project@1.14">
  <actions/>
  <description>Testing multi-configuration matrix for Fabrice</description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <hudson.plugins.jira.JiraProjectProperty plugin="jira@3.0.11"/>
    <hudson.model.ParametersDefinitionProperty>
      <parameterDefinitions>
        <hudson.model.BooleanParameterDefinition>
          <name>BUILD_NON_CLOUD</name>
          <description></description>
          <defaultValue>false</defaultValue>
        </hudson.model.BooleanParameterDefinition>
        <hudson.plugins.matrix__configuration__parameter.MatrixCombinationsParameterDefinition plugin="matrix-combinations-parameter@1.3.1">
          <name>MatrixFilter</name>
          <description></description>
          <shortcutList>
            <hudson.plugins.matrix__configuration__parameter.shortcut.ResultShortcut>
              <name>Successful</name>
              <exact>false</exact>
              <resultsToCheck>
                <string>SUCCESS</string>
              </resultsToCheck>
            </hudson.plugins.matrix__configuration__parameter.shortcut.ResultShortcut>
            <hudson.plugins.matrix__configuration__parameter.shortcut.ResultShortcut>
              <name>Failed</name>
              <exact>false</exact>
              <resultsToCheck>
                <string>FAILURE</string>
              </resultsToCheck>
            </hudson.plugins.matrix__configuration__parameter.shortcut.ResultShortcut>
            <hudson.plugins.matrix__configuration__parameter.shortcut.MatrixCombinationsShortcut_-All/>
            <hudson.plugins.matrix__configuration__parameter.shortcut.MatrixCombinationsShortcut_-None/>
          </shortcutList>
        </hudson.plugins.matrix__configuration__parameter.MatrixCombinationsParameterDefinition>
      </parameterDefinitions>
    </hudson.model.ParametersDefinitionProperty>
    <hudson.plugins.throttleconcurrents.ThrottleJobProperty plugin="throttle-concurrents@2.0.1">
      <maxConcurrentPerNode>0</maxConcurrentPerNode>
      <maxConcurrentTotal>0</maxConcurrentTotal>
      <categories class="java.util.concurrent.CopyOnWriteArrayList"/>
      <throttleEnabled>false</throttleEnabled>
      <throttleOption>project</throttleOption>
      <limitOneJobWithMatchingParams>false</limitOneJobWithMatchingParams>
      <matrixOptions>
        <throttleMatrixBuilds>true</throttleMatrixBuilds>
        <throttleMatrixConfigurations>false</throttleMatrixConfigurations>
      </matrixOptions>
      <paramsToUseForLimit></paramsToUseForLimit>
    </hudson.plugins.throttleconcurrents.ThrottleJobProperty>
  </properties>
  <scm class="hudson.scm.NullSCM"/>
  <assignedNode>X86_UBUNTU</assignedNode>
  <canRoam>false</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers/>
  <concurrentBuild>false</concurrentBuild>
  <axes>
    <hudson.matrix.LabelAxis>
      <name>label</name>
      <values>
        <string>X86_UBUNTU</string>
      </values>
    </hudson.matrix.LabelAxis>
    <hudson.matrix.TextAxis>
      <name>X</name>
      <values>
        <string>letest</string>
        <string>x1</string>
        <string>x2</string>
      </values>
    </hudson.matrix.TextAxis>
    <hudson.matrix.TextAxis>
      <name>Y</name>
      <values>
        <string>y1</string>
        <string>y2</string>
      </values>
    </hudson.matrix.TextAxis>
  </axes>
  <combinationFilter>(X==&quot;letest&quot; &amp;&amp; Y==&quot;y1&quot;)||(X!=&quot;letest&quot;)</combinationFilter>
  <builders>
    <hudson.tasks.Shell>
      <command>#!/bin/bash

echo &quot;X = $X&quot;
echo &quot;Y = $Y&quot;


if [[ $X == &quot;letest&quot; ]]; then
    echo &quot;TEST !&quot;

else

#if [[ $X == &quot;x1&quot; ]] &amp;&amp; [[ $Y == &quot;y2&quot; ]]; then

    echo &quot;FABTEST...&quot;

    echo &quot;Build Number: $BUILD_NUMBER&quot;
    echo &quot;Hostname: `hostname`&quot;; echo &quot;ID: `id`&quot;
    echo &quot;Working dir is : `pwd`&quot;

    echo &quot;Build Number: $BUILD_NUMBER&quot; &gt; output.txt
    echo &quot;Hostname: `hostname`&quot;; echo &quot;ID: `id`&quot; &gt;&gt; output.txt
    echo &quot;Working dir is : `pwd`&quot; &gt;&gt; output.txt

    echo &quot;X: $X, Y: $Y&quot;

    echo &quot;BUILD_URL= $BUILD_URL&quot;

    # sleep 10
    SKIP=0
  
# else
#    echo &quot;SKIP !!!&quot;
#    SKIP=1
  
fi




echo &quot;SKIP=$SKIP&quot; &gt; export_props.properties</command>
    </hudson.tasks.Shell>
    <EnvInjectBuilder plugin="envinject@2.1.6">
      <info>
        <propertiesFilePath>export_props.properties</propertiesFilePath>
      </info>
    </EnvInjectBuilder>
    <org.jenkinsci.plugins.conditionalbuildstep.singlestep.SingleConditionalBuilder plugin="conditional-buildstep@1.3.6">
      <condition class="org.jenkins_ci.plugins.run_condition.core.BooleanCondition" plugin="run-condition@1.2">
        <token>$SKIP</token>
      </condition>
      <buildStep class="org.jenkins_ci.plugins.fail_the_build.FixResultBuilder" plugin="fail-the-build-plugin@1.0">
        <defaultResultName>ABORTED</defaultResultName>
        <success></success>
        <unstable></unstable>
        <failure></failure>
        <aborted></aborted>
      </buildStep>
      <runner class="org.jenkins_ci.plugins.run_condition.BuildStepRunner$Fail" plugin="run-condition@1.2"/>
    </org.jenkinsci.plugins.conditionalbuildstep.singlestep.SingleConditionalBuilder>
  </builders>
  <publishers/>
  <buildWrappers/>
  <executionStrategy class="hudson.matrix.DefaultMatrixExecutionStrategyImpl">
    <runSequentially>false</runSequentially>
    <touchStoneCombinationFilter>X==&quot;letest&quot; &amp;&amp; Y==&quot;y1&quot;</touchStoneCombinationFilter>
    <touchStoneResultCondition>
      <name>SUCCESS</name>
      <ordinal>0</ordinal>
      <color>BLUE</color>
      <completeBuild>true</completeBuild>
    </touchStoneResultCondition>
  </executionStrategy>
</matrix-project>